<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π PWA</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
  <meta name="theme-color" content="#1976d2">
    <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }
      
      body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          padding: 20px;
      }
      
      .container {
          max-width: 1200px;
          margin: 0 auto;
          background: white;
          border-radius: 15px;
          box-shadow: 0 20px 40px rgba(0,0,0,0.1);
          overflow: hidden;
      }
      
      .header {
          background: linear-gradient(45deg, #667eea, #764ba2);
          padding: 30px;
          text-align: center;
          color: white;
      }
      
      .header h1 {
          font-size: 2.5rem;
          margin-bottom: 10px;
          font-weight: 300;
      }
      
      .search-section {
          padding: 30px;
          border-bottom: 1px solid #eee;
      }
      
      .search-form {
          display: flex;
          gap: 15px;
          max-width: 600px;
          margin: 0 auto;
      }
      
      .search-input {
          flex: 1;
          padding: 15px 20px;
          border: 2px solid #e1e5e9;
          border-radius: 10px;
          font-size: 16px;
          transition: all 0.3s ease;
      }
      
      .search-input:focus {
          outline: none;
          border-color: #667eea;
          box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }
      
      .search-btn {
          padding: 15px 30px;
          background: linear-gradient(45deg, #667eea, #764ba2);
          color: white;
          border: none;
          border-radius: 10px;
          font-size: 16px;
          cursor: pointer;
          transition: transform 0.2s ease;
      }
      
      .search-btn:hover {
          transform: translateY(-2px);
      }
      
      .search-btn:disabled {
          opacity: 0.6;
          cursor: not-allowed;
          transform: none;
      }
      
      .results-section {
          padding: 30px;
      }
      
      .loading {
          text-align: center;
          padding: 40px;
          color: #666;
          font-size: 18px;
      }
      
      .error {
          background: #fee;
          border: 1px solid #fcc;
          color: #c66;
          padding: 15px;
          border-radius: 10px;
          margin-bottom: 20px;
      }
      
      .results-table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 20px;
          box-shadow: 0 5px 15px rgba(0,0,0,0.05);
          border-radius: 10px;
          overflow: hidden;
      }
      
      .results-table th,
      .results-table td {
          padding: 15px 20px;
          text-align: left;
          border-bottom: 1px solid #eee;
      }
      
      .results-table th {
          background: linear-gradient(45deg, #667eea, #764ba2);
          color: white;
          font-weight: 500;
          text-transform: uppercase;
          font-size: 14px;
          letter-spacing: 0.5px;
      }
      
      .results-table tbody tr:hover {
          background-color: #f8f9ff;
      }
      
      .results-table td:first-child {
          background-color: #f8f9fa;
          font-weight: 500;
          color: #495057;
          vertical-align: top;
          width: 200px;
      }
      
      .results-table td:last-child {
          vertical-align: top;
      }
      
      .profile-image {
          width: 100px;
          height: 100px;
          border-radius: 50%;
          object-fit: cover;
      }
      
      .results-table a {
          color: #667eea;
          text-decoration: none;
      }
      
      .results-table a:hover {
          text-decoration: underline;
      }
      
      .no-results {
          text-align: center;
          padding: 40px;
          color: #666;
          font-size: 18px;
      }
      
      @media (max-width: 768px) {
          .search-form {
              flex-direction: column;
          }
          
          .results-table {
              font-size: 14px;
          }
          
          .results-table th,
          .results-table td {
              padding: 10px;
          }
          
          .results-table td:first-child {
              width: 120px;
              font-size: 13px;
          }
      }
  </style>
</head>
<body>
  <!-- <h1>–ü—Ä–∏–≤–µ—Ç, PWA!</h1>
  <p>–≠—Ç–æ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä Progressive Web App.</p> -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js');
    }
  </script>
  <div class="container">
      <div class="header">
          <h1>–ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ Zello</h1>
          <p>–ó–Ω–∞–π–¥—ñ—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ Zello</p>
          <small style="opacity: 0.8; font-size: 0.9em;">
              üí° –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –æ–±—Ö—ñ–¥ CORS –æ–±–º–µ–∂–µ–Ω—å
          </small>
      </div>
      
      <div class="search-section">
          <form class="search-form" id="searchForm">
              <input 
                  type="text" 
                  class="search-input" 
                  id="searchInput" 
                  placeholder="–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ Zello..."
                  required
              >
              <button type="submit" class="search-btn" id="searchBtn">
                  –ü–æ—à—É–∫
              </button>
          </form>
      </div>
      
      <div class="results-section">
          <div id="loadingMessage" class="loading" style="display: none;">
              <div>üîç –ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞...</div>
          </div>
          
          <div id="errorMessage" class="error" style="display: none;"></div>
          
          <div id="resultsContainer" style="display: none;">
              <table class="results-table">
                  <thead>
                      <tr>
                          <th style="width: 200px;">–ü–æ–ª–µ</th>
                          <th>–ó–Ω–∞—á–µ–Ω–Ω—è</th>
                      </tr>
                  </thead>
                  <tbody id="resultsBody">
                  </tbody>
              </table>
          </div>
          
          <div id="noResults" class="no-results" style="display: none;">
              <div>üë§ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</div>
              <p>–°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à–µ —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</p>
          </div>
      </div>
  </div>

  <script>
      class ZelloUserSearch {
          constructor() {
              this.searchForm = document.getElementById('searchForm');
              this.searchInput = document.getElementById('searchInput');
              this.searchBtn = document.getElementById('searchBtn');
              this.loadingMessage = document.getElementById('loadingMessage');
              this.errorMessage = document.getElementById('errorMessage');
              this.resultsContainer = document.getElementById('resultsContainer');
              this.resultsBody = document.getElementById('resultsBody');
              this.noResults = document.getElementById('noResults');
              
              this.init();
          }
          
          init() {
              this.searchForm.addEventListener('submit', (e) => {
                  e.preventDefault();
                  this.searchUser();
              });
              
              this.searchInput.addEventListener('keypress', (e) => {
                  if (e.key === 'Enter') {
                      this.searchUser();
                  }
              });
          }
          
          async searchUser() {
              const name = this.searchInput.value.trim();
              if (!name) return;
              
              this.showLoading();
              
              try {
                  const profile = await this.fetchUserProfile(name);
                  this.displayResults(profile);
              } catch (error) {
                  this.showError(error.message);
              }
          }
          
          async fetchUserProfile(name) {
              const url = `https://zello.com/users/s?name=${encodeURIComponent(name)}`;
              
              // –°–ø–∏—Å–æ–∫ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –æ–±—Ö–æ–¥–∞ CORS
              const proxies = [
                  // null, // –ü—Ä–æ–±—É–µ–º —Å–Ω–∞—á–∞–ª–∞ –±–µ–∑ –ø—Ä–æ–∫—Å–∏
                  'https://corsproxy.io/?',
                  'https://api.allorigins.win/get?url=',
              ];
              
              for (let i = 0; i < proxies.length; i++) {
                  try {
                      let content;
                      
                      if (proxies[i] === null) {
                          // –ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –±–µ–∑ –ø—Ä–æ–∫—Å–∏
                          const response = await fetch(url);
                          content = await response.text();
                      } else if (proxies[i].includes('allorigins')) {
                          // AllOrigins –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –ø–æ–ª–µ–º contents
                          const proxyUrl = proxies[i] + encodeURIComponent(url);
                          const response = await fetch(proxyUrl);
                          const data = await response.json();
                          content = data.contents;
                      } else {
                          // –î—Ä—É–≥–∏–µ –ø—Ä–æ–∫—Å–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ç–µ–∫—Å—Ç –Ω–∞–ø—Ä—è–º—É—é
                          const proxyUrl = proxies[i] + url;
                          const response = await fetch(proxyUrl);
                          content = await response.text();
                      }
                      
                      // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ Zello.userData (–Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è)
                      const re = /Zello\.userData\s*=\s*(\{[\s\S]*?\})\s*;/;
                      const match = content.match(re);
                      
                      if (!match) {
                          throw new Error("Zello.userData –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ");
                      }

                      const userData = JSON.parse(match[1]);
                      const profile = userData.profile;
                      console.log(JSON.stringify(profile, null, 4));
                      
                      if (!profile) {
                          throw new Error("–ü—Ä–æ—Ñ—ñ–ª—å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ userData");
                      }
                      
                      this.updateProfileWithTime(profile);
                      return profile;
                      
                  } catch (error) {
                      console.warn(`–°–ø—Ä–æ–±–∞ ${i + 1} –Ω–µ –≤–¥–∞–ª–∞—Å—è:`, error.message);
                      
                      // –ï—Å–ª–∏ —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–ø—ã—Ç–∫–∞, –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
                      if (i === proxies.length - 1) {
                          throw new Error(`–ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞: ${error.message}`);
                      }
                      
                      // –ò–Ω–∞—á–µ –ø—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–æ–∫—Å–∏
                      continue;
                  }
              }
          }
          
          getTimeAgo(timestamp) {
              const now = new Date();
              const date = new Date(timestamp * 1000);
              const diffMs = now - date;
              
              const diffSeconds = Math.floor(diffMs / 1000);
              const diffMinutes = Math.floor(diffSeconds / 60);
              const diffHours = Math.floor(diffMinutes / 60);
              const diffDays = Math.floor(diffHours / 24);
              const diffMonths = Math.floor(diffDays / 30);
              const diffYears = Math.floor(diffDays / 365);
              
              if (diffYears > 0) {
                  return `${diffYears} ${this.pluralize(diffYears, '—Ä—ñ–∫', '—Ä–æ–∫–∏', '—Ä–æ–∫—ñ–≤')} —Ç–æ–º—É`;
              } else if (diffMonths > 0) {
                  return `${diffMonths} ${this.pluralize(diffMonths, '–º—ñ—Å—è—Ü—å', '–º—ñ—Å—è—Ü—ñ', '–º—ñ—Å—è—Ü—ñ–≤')} —Ç–æ–º—É`;
              } else if (diffDays > 0) {
                  return `${diffDays} ${this.pluralize(diffDays, '–¥–µ–Ω—å', '–¥–Ω—ñ', '–¥–Ω—ñ–≤')} —Ç–æ–º—É`;
              } else if (diffHours > 0) {
                  return `${diffHours} ${this.pluralize(diffHours, '–≥–æ–¥–∏–Ω–∞', '–≥–æ–¥–∏–Ω–∏', '–≥–æ–¥–∏–Ω')} —Ç–æ–º—É`;
              } else if (diffMinutes > 0) {
                  return `${diffMinutes} ${this.pluralize(diffMinutes, '—Ö–≤–∏–ª–∏–Ω—É', '—Ö–≤–∏–ª–∏–Ω–∏', '—Ö–≤–∏–ª–∏–Ω')} —Ç–æ–º—É`;
              } else {
                  return '–©–æ–π–Ω–æ';
              }
          }
          
          pluralize(number, one, two, five) {
              const n = Math.abs(number) % 100;
              const n1 = n % 10;
              if (n > 10 && n < 20) return five;
              if (n1 > 1 && n1 < 5) return two;
              if (n1 === 1) return one;
              return five;
          }

          makeLinksClickable(text) {
              // –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ URL
              const urlRegex = /(https?:\/\/[^\s]+|www\.[^\s]+|[a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z]{2,})+[^\s]*)/g;
              
              return text.replace(urlRegex, (url) => {
                  // –î–æ–±–∞–≤–ª—è–µ–º https:// –µ—Å–ª–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª –Ω–µ —É–∫–∞–∑–∞–Ω
                  let href = url;
                  if (!url.startsWith('http://') && !url.startsWith('https://')) {
                      href = 'https://' + url;
                  }
                  
                  return `<a href="${href}" target="_blank" rel="noopener noreferrer" style="color: #667eea; text-decoration: underline;">${url}</a>`;
              });
          }

          updateProfileWithTime(profile) {
              // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
              if (profile.created) {
                  const created = new Date(profile.created * 1000);
                  const timeAgo = this.getTimeAgo(profile.created);
                  profile.created_formatted = `${created.toLocaleString('ru-RU')} <small style="color: #666; font-weight: normal;">(${timeAgo})</small>`;
              }
              
              // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (ts - timestamp)
              if (profile.ts) {
                  const lastUpdate = new Date(profile.ts * 1000);
                  const timeAgo = this.getTimeAgo(profile.ts);
                  profile.last_update_formatted = `${lastUpdate.toLocaleString('ru-RU')} <small style="color: #666; font-weight: normal;">(${timeAgo})</small>`;
              }
              
              // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (ti - time image)
              if (profile.ti) {
                  const imageUpdate = new Date(profile.ti * 1000);
                  const timeAgo = this.getTimeAgo(profile.ti);
                  profile.image_update_formatted = `${imageUpdate.toLocaleString('ru-RU')} <small style="color: #666; font-weight: normal;">(${timeAgo})</small>`;
              }
          }
          
          displayResults(profile) {
              this.hideAllMessages();
              
              // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–π URL –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
              let imageUrl = '';
              let hasRealPhoto = false;
              
              if (profile.picture) {
                  // –î–æ–±–∞–≤–ª—è–µ–º https: –µ—Å–ª–∏ URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å //
                  imageUrl = profile.picture.startsWith('//') ? 'https:' + profile.picture : profile.picture;
                  hasRealPhoto = true;
              }
              
              // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
              const rows = [];
              
              // –§–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è
              if (hasRealPhoto) {
                  const imageClickHandler = `onclick="window.open('${imageUrl}', '_blank')" style="cursor: pointer;"`;
                  rows.push(`
                      <tr>
                          <td><strong>–§–æ—Ç–æ –ø—Ä–æ—Ñ—ñ–ª—é</strong></td>
                          <td>
                              <img src="${imageUrl}" alt="–§–æ—Ç–æ –ø—Ä–æ—Ñ—ñ–ª—é" class="profile-image" 
                                    title="–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –¥–ª—è –∑–±—ñ–ª—å—à–µ–Ω–Ω—è"
                                    ${imageClickHandler}>
                              <div style="margin-top: 5px; font-size: 12px; color: #666;">
                                  üì∑ –°–ø—Ä–∞–≤–∂–Ω—î —Ñ–æ—Ç–æ (–Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –¥–ª—è –∑–±—ñ–ª—å—à–µ–Ω–Ω—è)
                              </div>
                          </td>
                      </tr>
                  `);
              }
              
              // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–∑ –ø–æ–ª—è user)
              if (profile.user) {
                  rows.push(`
                      <tr>
                          <td><strong>–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</strong></td>
                          <td>${profile.user}</td>
                      </tr>
                  `);
              }
              
              // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è (–∏–∑ –ø–æ–ª—è name)
              if (profile.name) {
                  rows.push(`
                      <tr>
                          <td><strong>–í—ñ–¥–æ–±—Ä–∞–∂—É–≤–∞–Ω–µ —ñ–º'—è</strong></td>
                          <td>${profile.name}</td>
                      </tr>
                  `);
              }
              
              // –ü–æ–ª–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —É—á–µ—Ç–Ω—ã–º –∏–º–µ–Ω–µ–º (–∏–∑ –ø–æ–ª—è user_uc)
              if (profile.user_uc) {
                  rows.push(`
                      <tr>
                          <td><strong>–ü–æ–≤–Ω–µ —ñ–º'—è (UC)</strong></td>
                          <td>${profile.user_uc}</td>
                      </tr>
                  `);
              }
              
              // ID (–∏–∑ –ø–æ–ª—è key)
              if (profile.key) {
                  rows.push(`
                      <tr>
                          <td><strong>ID (–∫–ª—é—á)</strong></td>
                          <td>${profile.key}</td>
                      </tr>
                  `);
              }
              
              // MongoDB ID
              if (profile._id && profile._id.$id) {
                  rows.push(`
                      <tr>
                          <td><strong>MongoDB ID</strong></td>
                          <td><code style="font-size: 11px; background: #f5f5f5; padding: 2px 4px; border-radius: 3px;">${profile._id.$id}</code></td>
                      </tr>
                  `);
              }
              
              // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
              if (profile.created_formatted) {
                  rows.push(`
                      <tr>
                          <td><strong>–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è</strong></td>
                          <td>${profile.created_formatted}</td>
                      </tr>
                  `);
              }
              
              // –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
              if (profile.last_update_formatted) {
                  rows.push(`
                      <tr>
                          <td><strong>–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è</strong></td>
                          <td>${profile.last_update_formatted}</td>
                      </tr>
                  `);
              }
              
              // –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
              if (profile.image_update_formatted) {
                  rows.push(`
                      <tr>
                          <td><strong>–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ñ–æ—Ç–æ</strong></td>
                          <td>${profile.image_update_formatted}</td>
                      </tr>
                  `);
              }
              
              // –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
              if (profile.location) {
                  rows.push(`
                      <tr>
                          <td><strong>–ú—ñ—Å—Ü–µ–∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è</strong></td>
                          <td>${profile.location}</td>
                      </tr>
                  `);
              }
              
              // –û–ø–∏—Å–∞–Ω–∏–µ (–∏–∑ –ø–æ–ª—è about)
              if (profile.about) {
                  const aboutWithLinks = this.makeLinksClickable(profile.about);
                  rows.push(`
                      <tr>
                          <td><strong>–ü—Ä–æ —Å–µ–±–µ</strong></td>
                          <td>${aboutWithLinks}</td>
                      </tr>
                  `);
              }
              
              // –í–µ–±-—Å–∞–π—Ç
              if (profile.website) {
                  const websiteUrl = profile.website.startsWith('http') ? profile.website : 'https://' + profile.website;
                  rows.push(`
                      <tr>
                          <td><strong>–í–µ–±-—Å–∞–π—Ç</strong></td>
                          <td><a href="${websiteUrl}" target="_blank" rel="noopener">${profile.website}</a></td>
                      </tr>
                  `);
              }
              
              // –Ø–∑—ã–∫–∏
              if (profile.languages && profile.languages.length > 0) {
                  rows.push(`
                      <tr>
                          <td><strong>–ú–æ–≤–∏</strong></td>
                          <td>${profile.languages.join(', ')}</td>
                      </tr>
                  `);
              }
              
              // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ —Ñ–æ—Ç–æ
              if (profile.hasOwnProperty('hide_picture')) {
                  rows.push(`
                      <tr>
                          <td><strong>–ü—Ä–∏—Ö–æ–≤—É–≤–∞—Ç–∏ —Ñ–æ—Ç–æ</strong></td>
                          <td>${profile.hide_picture ? 'üîí –¢–∞–∫' : 'üëÅÔ∏è –ù—ñ'}</td>
                      </tr>
                  `);
              }
              
              // –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å (–∏—Å–ø–æ–ª—å–∑—É–µ–º user –≤–º–µ—Å—Ç–æ ID)
              if (profile.user) {
                  const profileUrl = `https://zello.com/users/s?name=${encodeURIComponent(profile.user)}`;
                  rows.push(`
                      <tr>
                          <td><strong>–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –ø—Ä–æ—Ñ—ñ–ª—å</strong></td>
                          <td><a href="${profileUrl}" target="_blank" rel="noopener">–í—ñ–¥–∫—Ä–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å</a></td>
                      </tr>
                  `);
              }
              
              this.resultsBody.innerHTML = rows.join('');
              this.resultsContainer.style.display = 'block';
          }
          
          showLoading() {
              this.hideAllMessages();
              this.searchBtn.disabled = true;
              this.searchBtn.textContent = '–ü–æ—à—É–∫...';
              this.loadingMessage.style.display = 'block';
          }
          
          showError(message) {
              this.hideAllMessages();
              this.errorMessage.textContent = message;
              this.errorMessage.style.display = 'block';
              this.resetButton();
          }
          
          hideAllMessages() {
              this.loadingMessage.style.display = 'none';
              this.errorMessage.style.display = 'none';
              this.resultsContainer.style.display = 'none';
              this.noResults.style.display = 'none';
          }
          
          resetButton() {
              this.searchBtn.disabled = false;
              this.searchBtn.textContent = '–ü–æ—à—É–∫';
          }
      }
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
      document.addEventListener('DOMContentLoaded', () => {
          new ZelloUserSearch();
      });
  </script>
</body>
</html>
